<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Title of the document</title>
    <!-- loading the human-readable (not minified) version -->
    <script src="https://unpkg.com/ipfs-api/dist/index.js"></script>
    <!--  <script src="https://cdn.jsdelivr.net/npm/buffer@5.1.0/index.min.js"></script> -->
    <script src="https://unpkg.com/ipfs/dist/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ipfs/dist/index.js"></script>
    <!-- <script src="https://wzrd.in/standalone/buffer"></script>
 -->
    <script src="https://unpkg.com/ipfs-api@9.0.0/dist/index.js" integrity="sha384-5bXRcW9kyxxnSMbOoHzraqa7Z0PQWIao+cgeg327zit1hz5LZCEbIMx/LWKPReuB" crossorigin="anonymous"></script>
</head>
<script type="text/javascript">
var ipfs = window.IpfsApi('localhost', '5001')
 
function processFile(evt) {

    var file = evt.target.files[0];
    reader = new FileReader();

    reader.onload = function(e) {
        var data = e.target.result;
         
        const Buffer = window.IpfsApi().Buffer;
      
        
        const buf = Buffer.from(data) // Convert data into buffer
        const files = [{
            path: '/home/hasura/enc/a.txt',
           
            content: buf
        }]

        ipfs.files.add(files, function(err, files) {
            // 'files' will be an array of objects containing paths and the multihashes of the files added
            if (err) console.log(err); else console.log(files);
             
        })
 
    }
    reader.readAsArrayBuffer(file);
}
</script>

<body>
    <input type="file" id="file-upload" onchange="processFile(event)">
</body>

</html>
